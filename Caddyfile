{
  debug

  # Railway provides this env var
  http_port {$PORT}

  # Only HTTP/2 (h2c) on the backend; incoming will be h2/h2c automatically.
  servers {
    protocols h2 h2c
  }
}

# Accept gRPC on $PORT and proxy to your gRPC backend
:{$PORT} {
  reverse_proxy {$SERVICE_URL} {
    transport http {
      # gRPC backend is h2c (HTTP/2 cleartext)
      versions h2c
    }
  }
}
